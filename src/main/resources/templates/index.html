<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/defaultLayout}">
<head>
    <title>QuickTicket - 홈</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>

<main layout:fragment="content">
    <section class="hero-section" th:if="${not #lists.isEmpty(hotEvents)}">
        <div class="hero-bg-placeholder"
             th:style="'background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(/api/images/event/' + ${hotEvents[0].id} + '); background-size: cover; background-position: center;'">

            <h1 class="hero-title" th:text="${hotEvents[0].name}">공연명</h1>

            <p class="hero-subtitle">
                <span th:text="${hotEvents[0].location?.name}">장소 정보</span><br>
                지금 가장 핫한 공연을 만나보세요!
            </p>

            <a th:href="@{/event/{id}(id=${hotEvents[0].id})}" class="btn-primary"
               style="display: inline-block; margin-top: 20px; padding: 12px 24px; background-color: #fff; color: #000; text-decoration: none; font-weight: bold; border-radius: 4px;">
                지금 예매하기
            </a>
        </div>
    </section>

    <div class="main-container">
        <!--WHAT'S HOT - 조회수가 높은거 5개를 보여줌-->
        <section class="main-section">
            <div class="section-header">
                <h2 class="main-title">WHAT'S HOT</h2>
            </div>

            <div class="concert-grid">
                <a th:each="event : ${hotEvents}"
                   th:href="@{/event/{id}(id=${event?.id})}" class="concert-card">
                    <div class="thumb-wrapper">
                        <img th:src="@{/api/images/event/{id}(id=${event?.id})}"
                             th:alt="${event?.name}"
                             class="concert-img"
                             onerror="this.src='/images/default-poster.png';">
                    </div>
                    <div class="card-info">
                        <div class="card-title" th:text="${event?.name}">공연명</div>
                        <div class="card-sub" th:text="${event?.location?.name}">장소 정보</div>
                    </div>
                </a>
            </div>
        </section>

        <!--HOT DEAL - 마감 임박한 공연 5개를 보여줌-->
        <section class="main-section">
            <div class="section-header">
                <h2 class="main-title">HOT DEAL</h2>
            </div>

            <div class="concert-grid">
                <th:block th:if="${closingSoon != null and !#lists.isEmpty(closingSoon)}">
                    <a th:each="event : ${closingSoon}"
                       th:href="@{/event/{id}(id=${event?.id})}" class="concert-card">
                        <div class="thumb-wrapper">
                            <img th:src="@{/api/images/event/{id}(id=${event?.id})}"
                                 th:alt="${event?.name}"
                                 class="concert-img"
                                 onerror="this.src='/images/default-poster.png';">
                        </div>
                        <div class="card-info">
                            <div class="card-title" th:text="${event?.name}">공연명</div>
                            <div class="card-sub" style="color: #ff4d4d; font-weight: bold;">마감 임박!</div>
                        </div>
                    </a>
                </th:block>

                <div th:if="${closingSoon == null or #lists.isEmpty(closingSoon)}"
                     style="grid-column: 1 / -1; text-align: center; padding: 50px 0; color: #999;">
                    아직 마감 임박한 공연이 없습니다.
                </div>
            </div>
        </section>
    </div>
</main>

</body>
</html>